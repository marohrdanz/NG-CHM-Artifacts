'use strict';const NgChm={};window.NgChm=NgChm;
(function(){function A(a,h){a=u(a,"export");h&&Object.assign(a,h);return a}function u(a,h){let c=a.split(".");"NgChm"===c[0]&&(c=c.slice(1));var d=Error("Defining namespace "+a);const p=d.stack.split("\n"),x=d.message.indexOf("NgChm.");let m=2;p[0].includes(d.message)&&m++;if(m<p.length){const a=p[m].indexOf("javascript/"),c=p[m].indexOf(".js:");0<x&&0<=a&&0<=c&&(r=p[m].substring(a+11,c+3),y.push({op:h,ns:d.message.substr(x+6),src:r}))}else r="chm.html";"export"===h&&0>q.indexOf(a)&&q.push(a);"import"==
h&&0>q.indexOf(a)&&(z++,console.log("Namespace imported before definition #"+z+": "+a+" in "+r));a=NgChm;for(h=0;h<c.length;h++)d=c[h],"undefined"===typeof a[d]&&(a[d]={}),a=a[d];return a}function G(a,d){if(0==a.length)d(),console.log("next executed");else{const c=document.createElement("SCRIPT");c.type="text/javascript";c.src=a.shift();c.onload=()=>{console.log("Loaded "+c.src);G(a,d)};c.onerror=()=>{console.error("Error loading "+c.src)};document.head.appendChild(c)}}function D(){function a(a){function c(a){const e=
Object.entries(l.graph.nodes).filter(([e,c])=>{e=Math.ceil(g.measureText(e).width+4)/k.xs;var h=22/k.ys,l=d.getBoundingClientRect();const m=(a.clientX-l.x-2)/k.xs-k.xp;l=(a.clientY-l.y-2)/k.ys-k.yp;h=l>=c.layoutPosY&&l<=c.layoutPosY+h;return m>=c.layoutPosX&&m<=c.layoutPosX+e&&h});0<e.length&&(v=e[0][1],E=!0)}function h(e){E&&(v.layoutPosX+=e.movementX/k.xs,v.layoutPosY+=e.movementY/k.ys,B||requestAnimationFrame(x))}function p(e){E=!1}function x(){l.layoutIteration();l.layoutCalcBounds();g.clearRect(0,
0,1500,1500);g.lineWidth=1;k.xp=-l.graph.layoutMinX;k.xs=1497/(l.graph.layoutMaxX+k.xp);k.yp=-l.graph.layoutMinY;k.ys=1460/(l.graph.layoutMaxY+k.yp);Object.entries(l.graph.nodes).forEach(([b,a])=>{const e=Math.ceil(g.measureText(b).width+4),c=m(a.layoutPosX),t=r(a.layoutPosY);a.width=(c+e-2)/k.xs-k.xp-((c-2)/k.xs-k.xp);a=a.id;a=a.includes(".js")?H[a]||"#fff7f7":"#eeeeff";g.fillStyle=a;g.fillRect(c,t,e,22);g.strokeStyle="#000000";g.strokeRect(c,t,e,22);g.fillStyle="#000000";g.fillText(b,c+2,t+16)});
const e=[],a=[],d=[],c=[],h=[],p=[];Object.entries(l.graph.edges).forEach(([,b])=>{b.sourceX=m(b.source.layoutPosX);e.push(b.sourceX);b.sourceY=r(b.source.layoutPosY);a.push(b.sourceY);b.sourceW=Math.ceil(g.measureText(b.source.id).width+4);d.push(b.sourceW);b.targetX=m(b.target.layoutPosX);c.push(b.targetX);b.targetY=r(b.target.layoutPosY);h.push(b.targetY);b.targetW=Math.ceil(g.measureText(b.target.id).width+4);p.push(b.targetW)});const q=[];e.forEach(b=>{-1==q.indexOf(b)&&q.push(b)});const u=[];
u.length=e.length;q.forEach(b=>{let a=0;const f=e.map((a,b)=>({x:a,index:b,targetY:h[b],targetX:c[b],width:d[b]})).filter(a=>a.x==b).map(b=>{b.posn=a++;return b}),g=f.length;for(var t=!0;t;){t=!1;for(let a=0;a<g;a++){let e=f[a].posn;if(f[a].targetX<b&&0<e){var n=f.map((a,b)=>[a,b]).filter(a=>a[0].posn==e-1);n=n[0];n=n[1];if(f[a].targetY<f[n].targetY||f[a].targetY==f[n].targetY&&f[a].targetX<f[n].targetX)t=f[a].posn,f[a].posn=f[n].posn,f[n].posn=t,t=!0}else f[a].targetX>=b&&e<g-1&&(n=f.map((a,b)=>
[a,b]).filter(a=>a[0].posn==e+1)[0][1],f[a].targetY<f[n].targetY||f[a].targetY==f[n].targetY&&f[a].targetX>=f[n].targetX)&&(t=f[a].posn,f[a].posn=f[n].posn,f[n].posn=t,t=!0)}}const l=f[0].width/(g+1);f.forEach(a=>{u[a.index]=b+(a.posn+1)*l})});const v=[];c.forEach(a=>{-1==v.indexOf(a)&&v.push(a)});const w=[];w.length=e.length;v.forEach(b=>{const d=c.map((b,c)=>({x:b,index:c,sourceY:a[c],sourceX:e[c],width:p[c]})).filter(a=>a.x==b),f=d.length;d.sort((a,b)=>Math.sign(a.sourceX-b.sourceX));const h=d[0].width/
(f+1);d.forEach((a,e)=>{w[a.index]=b+(e+1)*h})});const y=[],z=[];h.forEach(a=>{-1==z.indexOf(a)&&z.push(a)});y.length=h.length;z.forEach(b=>{const c=h.map((b,c)=>{b={y:b,index:c,sourceY:a[c],sourceX:e[c],targetX:w[c]};b.minX=b.sourceX<b.targetX?b.sourceX:b.targetX;b.maxX=b.sourceX>b.targetX?b.sourceX:b.targetX;return b}).filter(a=>a.y==b),f=c.length;c.sort((a,b)=>a.minX<b.minX?-1:b.minX<a.minX?1:0);let d=0;for(;d<f;){let a=d+1,e=c[d].maxX;for(;a<f-1&&c[a].minX<e;)c[a].maxX>e&&(e=c[a].maxX),a++;const h=
c.slice(d,a);h.sort((a,b)=>Math.sign(a.sourceX-b.sourceX)*Math.sign(b.sourceY-a.sourceY));let g=0;Object.entries(l.graph.nodes).forEach(([,a])=>{const c=m(a.layoutPosX);a=r(a.layoutPosY);a<b&&c>=h[0].minX&&c<=e&&a>g&&(g=a)});const k=(b-g-22-4)/(h.length+1);let p=g+22+2+k;h.forEach(a=>{y[a.index]=p;p+=k});d=a}});let C=0;Object.entries(l.graph.edges).forEach(([,a])=>{a.srcX=u[C];a.tgtX=w[C];a.barY=y[C];C++});g.lineWidth=2;Object.entries(l.graph.edges).forEach(([,a])=>{g.beginPath();g.strokeStyle=a.style.color;
m(a.source.layoutPosX);let b=r(a.source.layoutPosY);g.measureText(a.source.id);m(a.target.layoutPosX);let e=a.targetY;g.measureText(a.target.id);e>b+22?b+=22:b>e+22?e+=22:(b+=15,e+=15);g.moveTo(a.srcX,b);g.lineTo(a.srcX,a.barY);g.lineTo(a.tgtX,a.barY);g.lineTo(a.tgtX,e);g.stroke()});A++;B&&requestAnimationFrame(x)}function m(a){return 2+(a+k.xp)*k.xs}function r(a){return 2+(a+k.yp)*k.ys}F?d.replaceChildren():(d=document.createElement("CANVAS"),a=document.getElementById("content"),d.id="dracula",d.style.display=
"block",d.style.position="relative",d.style.width=a.innerWidth,d.style.height=a.innerHeight,d.width=1500,d.height=1500,[...a.children].forEach(a=>{a!=d&&(a.style.display="none")}),a.appendChild(d),d.addEventListener("mousedown",c,{passive:!0}),d.addEventListener("mousemove",h,{passive:!0}),d.addEventListener("mouseup",p,{passive:!0}),d.addEventListener("mouseout",p,{passive:!0}),F=!0);const q=[],w=new Dracula.Graph;y.forEach(a=>{const c=JSON.stringify([a.ns,a.src]);0<=q.indexOf(c)||(q.push(c),"export"==
a.op?w.addEdge(a.ns,a.src,{directed:!0,color:"#aaaaff",op:a.op}):w.addEdge(a.src,a.ns,{directed:!0,color:"#ffaaaa",op:a.op}))});w.edges.forEach(a=>{a.style.directed&&(a.directed=a.style.directed);a.op=a.style.op});0<z&&console.warn("Module layout not designed for cyclic import graphs.");const l=new ModuleLayoutEngine(w),g=d.getContext("2d");Object.entries(l.graph.nodes).map(([a])=>Math.ceil(g.measureText(a).width+4)).reduce((a,c)=>Math.max(a,c));const k={};var A=0;requestAnimationFrame(x);var E=!1,
B=!0,v,u=0;D.start=function(){B=!0;requestAnimationFrame(x);l.c=u};D.stop=function(){B=!1;u=l.c;l.c=1E-6}}F?a():G(["javascript/lib/raphael.js","javascript/lib/dracula.min.js","javascript/ModuleLayoutEngine.js"],()=>{a()})}const y=[],q=[];NgChm.exportToNS=A;NgChm.createNS=A;NgChm.importNS=function(a){return u(a,"import")};NgChm.markFile=()=>{};var r="n/a",z=0;NgChm.getLog=function(){return y.slice(0)};var F=!1,d;const H={};NgChm.markFile=function(){var a=Error("Source file done");const d=a.stack.split("\n");
let c=1;d[0].includes(a.message)&&c++;a=d[c].indexOf("javascript/");const q=d[c].indexOf(".js:");0<=a&&0<=q&&(r=d[c].substring(a+11,q+3),H[r]="#eeffee")};NgChm.dracula=D})();
'use strict';(function(){NgChm.markFile();NgChm.createNS("NgChm.CFG",{api:document.body.dataset.hasOwnProperty("ngchmApi")?document.body.dataset.ngchmApi:"",custom_specified:document.body.dataset.hasOwnProperty("ngchmCustomFile"),custom_script:document.body.dataset.hasOwnProperty("ngchmCustomFile")?document.body.dataset.ngchmCustomFile:"javascript/custom/custom.js",builder_url:document.body.dataset.hasOwnProperty("ngchmBuilderUrl")?document.body.dataset.ngchmBuilderUrl:"https://build.ngchm.net/NGCHM-web-builder/"})})();
